"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.canUseWebp=exports.OS=void 0,exports.cancelWebp=cancelWebp,exports.iterateTags=iterateTags;var OS=exports.OS=function(){var e=navigator.platform.toLowerCase();return e.includes("mac")?"MacOS":["iphone","ipad","ipod","ipod touch"].includes(e)?"iOS":e.includes("win")?"Windows":/android/.test(navigator.userAgent.toLowerCase())?"Android":/linux/.test(e)?"Linux":"unknown"}(),canUseWebp=exports.canUseWebp=function(){var e=document.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))&&0===e.toDataURL("image/webp").indexOf("data:image/webp")}();function iterateTags(e,o){e.forEach(function(e){var t=e.getAttribute(o);if(t){var a=e.getAttribute("data-ext")||"jpg",n=t.replace(/\/webp\//,"/").replace(/\.\w+$/,".".concat(a));"img"===e.tagName.toLowerCase()?e.setAttribute("src",n):"source"!==e.tagName.toLowerCase()&&"image"!==e.tagName.toLowerCase()||e.setAttribute("href",n)}})}function cancelWebp(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["img"];!canUseWebp||"MacOS"===OS||document.documentElement.classList.contains("no-webp")?e.forEach(function(e){iterateTags(document.querySelectorAll("".concat(e,"[data-src]")),"data-src")}):console.log("canUseWebp!")}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYnMvaW1hZ2Utb3B0aW1pemF0aW9uL2Nhbl91c2Vfd2VicC5qcyJdLCJuYW1lcyI6WyJPUyIsImV4cG9ydHMiLCJwbGF0Zm9ybSIsIm5hdmlnYXRvciIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJ0ZXN0IiwidXNlckFnZW50IiwiaW9zUGxhdGZvcm1zIiwiY2FuVXNlV2VicCIsImVsZW0iLCJnZXRDb250ZXh0IiwidG9EYXRhVVJMIiwiaW5kZXhPZiIsIml0ZXJhdGVUYWdzIiwidGFnc0xpc3QiLCJhdHRyIiwiZm9yRWFjaCIsIml0ZW0iLCJkYXRhU3JjIiwiZ2V0QXR0cmlidXRlIiwicmVwbGFjZSIsImNvbmNhdCIsImV4dCIsImNsZWFuUGF0aCIsInRhZ05hbWUiLCJzZXRBdHRyaWJ1dGUiLCJjYW5jZWxXZWJwIiwic2VsZWN0b3JMaXN0IiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiZG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb25zb2xlIiwibG9nIl0sIm1hcHBpbmdzIjoidUtBQ0EsSUFBTUEsR0FBRUMsUUFBQUQsR0FBSSxXQUNSLElBQU1FLEVBQVdDLFVBQVVELFNBQVNFLGNBR3BDLE9BQUlGLEVBQVNHLFNBQVMsT0FBZSxRQUZoQixDQUFDLFNBQVUsT0FBUSxPQUFRLGNBRy9CQSxTQUFTSCxHQUFrQixNQUN4Q0EsRUFBU0csU0FBUyxPQUFlLFVBUHpDLFVBQUFDLEtBQUFILFVBQUFJLFVBQUFILGVBQUEsVUFDUSxRQUFBRSxLQUFBSixHQUFVLFFBRVJNLFVBRkUsR0FPSkMsV0FBVUgsUUFBQUEsV0FBSSxXQUNsQixJQUFJSSxFQUFRSixTQUFLSixjQUFrQixVQUVuQyxTQUFPUSxFQUFTQyxhQUFBRCxFQUFBQyxXQUFBLFFBQ2hCLElBQUFELEVBQUFFLFVBQUEsY0FBQUMsUUFBQSxtQkFKa0IsR0FXdEIsU0FBSUMsWUFBQUMsRUFBQUMsR0FNQUQsRUFBU0UsUUFBUSxTQUFBQyxHQUZyQixJQUFBQyxFQUFBRCxFQUFBRSxhQUFBSixHQUNBLEdBQVNGLEVBQVQsQ0FFY0ssSUFBQUEsRUFBVUQsRUFBS0UsYUFBYUosYUFBSyxNQUNsQ0csRUFBU0EsRUFBQUUsUUFBQSxXQUFBLEtBQUFBLFFBQUEsU0FBQSxJQUFBQyxPQUFBQyxJQUdvQixRQUE1QkMsRUFBU0MsUUFBR04sY0FFVkQsRUFBQ08sYUFBUXJCLE1BQWFvQixHQUNTLFdBQTlCRSxFQUFhRCxRQUFPRCxlQUFVLFVBQUFOLEVBQUFPLFFBQUFyQixlQUNoQ2MsRUFBSUEsYUFBYWQsT0FBQUEsTUFNaEMsU0FBQXVCLGFBQUEsSUFBQUMsRUFBQSxFQUFBQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBQSxDQUFBLFFBQ1NGLFlBQW1DLFVBQUEzQixJQUFBZ0MsU0FBQUMsZ0JBQUFDLFVBQUFDLFNBQUEsV0FBeEJQLEVBQVlDLFFBQUFBLFNBQUFBLEdBRXhCRCxZQURzQkksU0FBT0ksaUJBQWFILEdBQUFBLE9BQUFBLEVBQWdCQyxlQUNyQyxjQUduQkcsUUFBQUMsSUFBQSIsImZpbGUiOiJsaWJzL2ltYWdlLW9wdGltaXphdGlvbi9jYW5fdXNlX3dlYnAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyDQntC/0YDQtdC00LXQu9GP0LXQvCDQntChXHJcbmNvbnN0IE9TID0gKCgpID0+IHtcclxuICAgIGNvbnN0IHBsYXRmb3JtID0gbmF2aWdhdG9yLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBpb3NQbGF0Zm9ybXMgPSBbJ2lwaG9uZScsICdpcGFkJywgJ2lwb2QnLCAnaXBvZCB0b3VjaCddO1xyXG5cclxuICAgIGlmIChwbGF0Zm9ybS5pbmNsdWRlcygnbWFjJykpIHJldHVybiAnTWFjT1MnO1xyXG4gICAgaWYgKGlvc1BsYXRmb3Jtcy5pbmNsdWRlcyhwbGF0Zm9ybSkpIHJldHVybiAnaU9TJztcclxuICAgIGlmIChwbGF0Zm9ybS5pbmNsdWRlcygnd2luJykpIHJldHVybiAnV2luZG93cyc7XHJcbiAgICBpZiAoL2FuZHJvaWQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuICdBbmRyb2lkJztcclxuICAgIGlmICgvbGludXgvLnRlc3QocGxhdGZvcm0pKSByZXR1cm4gJ0xpbnV4JztcclxuXHJcbiAgICByZXR1cm4gJ3Vua25vd24nO1xyXG59KSgpO1xyXG5cclxuLy8g0J/RgNC+0LLQtdGA0LrQsCDQv9C+0LTQtNC10YDQttC60Lggd2VicFxyXG5jb25zdCBjYW5Vc2VXZWJwID0gKCgpID0+IHtcclxuICAgIGNvbnN0IGVsZW0gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICAgIHJldHVybiAhIShlbGVtLmdldENvbnRleHQgJiYgZWxlbS5nZXRDb250ZXh0KCcyZCcpKSAmJlxyXG4gICAgICAgIGVsZW0udG9EYXRhVVJMKCdpbWFnZS93ZWJwJykuaW5kZXhPZignZGF0YTppbWFnZS93ZWJwJykgPT09IDA7XHJcbn0pKCk7XHJcblxyXG5cclxuXHJcbi8vINCc0LXQvdGP0LXQvCDQv9GD0YLRjCDQtNC+INC60LDRgNGC0LjQvdC60Lgg0L3QsCDRgtC+0YIsINGH0YLQviDQsdC10Lcg0L/QsNC/0LrQuCAvd2VicCDQuCDRgSDQtNGA0YPQs9C40Lwg0YDQsNGB0YjQuNGA0LXQvdC40LXQvFxyXG5mdW5jdGlvbiBpdGVyYXRlVGFncyh0YWdzTGlzdCwgYXR0cikge1xyXG4gICAgdGFnc0xpc3QuZm9yRWFjaChpdGVtID0+IHtcclxuICAgICAgICBjb25zdCBkYXRhU3JjID0gaXRlbS5nZXRBdHRyaWJ1dGUoYXR0cik7XHJcbiAgICAgICAgaWYgKCFkYXRhU3JjKSByZXR1cm47XHJcblxyXG4gICAgICAgIGNvbnN0IGV4dCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWV4dCcpIHx8ICdqcGcnO1xyXG4gICAgICAgIGNvbnN0IGNsZWFuUGF0aCA9IGRhdGFTcmMucmVwbGFjZSgvXFwvd2VicFxcLy8sICcvJykucmVwbGFjZSgvXFwuXFx3KyQvLCBgLiR7ZXh0fWApO1xyXG5cclxuICAgICAgICBpZiAoaXRlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbWcnKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdzcmMnLCBjbGVhblBhdGgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdzb3VyY2UnIHx8IGl0ZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW1hZ2UnKSB7XHJcbiAgICAgICAgICAgIGl0ZW0uc2V0QXR0cmlidXRlKCdocmVmJywgY2xlYW5QYXRoKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8g0J7RgdC90L7QstC90LDRjyDRhNGD0L3QutGG0LjRjyDQvtGC0LzQtdC90Ysgd2VicFxyXG5mdW5jdGlvbiBjYW5jZWxXZWJwKHNlbGVjdG9yTGlzdCA9IFsnaW1nJ10pIHtcclxuICAgIGlmICghY2FuVXNlV2VicCB8fCBPUyA9PT0gJ01hY09TJyB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCduby13ZWJwJykpIHtcclxuICAgICAgICBzZWxlY3Rvckxpc3QuZm9yRWFjaChzZWxlY3RvciA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgJHtzZWxlY3Rvcn1bZGF0YS1zcmNdYCk7XHJcbiAgICAgICAgICAgIGl0ZXJhdGVUYWdzKGVsZW1lbnRzLCAnZGF0YS1zcmMnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ2NhblVzZVdlYnAhJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCB7IE9TLCBjYW5Vc2VXZWJwLCBpdGVyYXRlVGFncywgY2FuY2VsV2VicCB9O1xyXG5cclxuXHJcbiJdfQ==
